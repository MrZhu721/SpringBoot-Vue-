"use strict";(self["webpackChunkspring_vue_demo"]=self["webpackChunkspring_vue_demo"]||[]).push([[785],{7929:function(e,r,t){t.d(r,{Z:function(){return c}});var o=t(6252),a=t(3577);function d(e,r,t,d,s,n){return(0,o.wg)(),(0,o.iD)("div",{class:"ValidCode disabled-select",style:(0,a.j5)(`width:${t.width}; height:${t.height}`),onClick:r[0]||(r[0]=(...e)=>n.refreshCode&&n.refreshCode(...e))},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.codeList,((e,r)=>((0,o.wg)(),(0,o.iD)("span",{key:r,style:(0,a.j5)(n.getStyle(e))},(0,a.zw)(e.code),5)))),128))],4)}function s(e,r,t,o,a,d){return" Data "}var n={name:"Data"},i=t(3744);const l=(0,i.Z)(n,[["render",s]]);var u=l,m={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"100px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createdCode()}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){const e=this.length,r=[],t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890",o=t.length;for(let a=0;a<e;a++){const e=[Math.round(220*Math.random()),Math.round(200*Math.random()),Math.round(200*Math.random())];r.push({code:t.charAt(Math.floor(Math.random()*o)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+6+10+"px",padding:`${[Math.floor(10*Math.random())]}px`,transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=r,this.$emit("input",r.map((e=>e.code)).join(""))},getStyle(){return`color:${u.color}; font-size:${u.fontSize}; padding:${u.padding}; transform:${u.transform}`}}};const p=(0,i.Z)(m,[["render",d],["__scopeId","data-v-2bd898e8"]]);var c=p},2785:function(e,r,t){t.r(r),t.d(r,{default:function(){return k}});var o=t(6252),a=t(3577),d=t(9963);const s=e=>((0,o.dD)("data-v-735b96ba"),e=e(),(0,o.Cn)(),e),n=s((()=>(0,o._)("div",{class:"text"},[(0,o._)("h2",null,[(0,o.Uk)("真正的书籍应是黑夜和沉默的产物，"),(0,o._)("br"),(0,o.Uk)("而不是白昼和闲聊的果实。")]),(0,o._)("div",null,"——马塞尔•普鲁斯特")],-1))),i={style:{width:"350px",height:"400px",margin:"150px auto",padding:"20px","margin-right":"10%","border-radius":"15px",float:"right",background:"rgba(255,255,255,0.3)"}},l=s((()=>(0,o._)("div",{style:{color:"rgba(255,255,255,0.3)","font-size":"30px","text-align":"center","margin-bottom":"30px"}},"欢迎注册",-1))),u={style:{display:"flex","margin-top":"10px"}},m={style:{"text-align":"center","margin-top":"40px"}},p=s((()=>(0,o._)("span",{style:{"vertical-align":"middle"}},"注册",-1))),c=(0,o.Uk)("去登录 ");function h(e,r,t,s,h,f){const g=(0,o.up)("el-input"),w=(0,o.up)("el-form-item"),v=(0,o.up)("ValidCode"),y=(0,o.up)("Search"),k=(0,o.up)("el-icon"),b=(0,o.up)("el-button"),C=(0,o.up)("RefreshLeft"),_=(0,o.up)("el-form");return(0,o.wg)(),(0,o.iD)("div",{style:(0,a.j5)(h.background),class:"bgBackground"},[n,(0,o._)("div",i,[l,(0,o.Wm)(_,{model:h.form,ref:"form",size:"normal",rules:h.rules},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{width:"80%"},"prefix-icon":"User",modelValue:h.form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>h.form.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{width:"80%"},"prefix-icon":"Lock",modelValue:h.form.password,"onUpdate:modelValue":r[1]||(r[1]=e=>h.form.password=e),"show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{prop:"confirm"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{style:{width:"80%"},"prefix-icon":"Lock",modelValue:h.form.confirm,"onUpdate:modelValue":r[2]||(r[2]=e=>h.form.confirm=e),"show-password":"",placeholder:"请再次输入密码"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o.Wm)(g,{"prefix-icon":"Key",modelValue:h.form.validCode,"onUpdate:modelValue":r[3]||(r[3]=e=>h.form.validCode=e),style:{width:"70%"},placeholder:"请输入验证码"},null,8,["modelValue"]),(0,o.Wm)(v,{onInput:f.createValidCode},null,8,["onInput"])])])),_:1}),(0,o._)("div",m,[(0,o.Wm)(b,{style:{width:"50%"},type:"primary",onClick:f.register,onKeyup:(0,d.D2)(f.register,["enter"])},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{style:{"vertical-align":"middle"}},{default:(0,o.w5)((()=>[(0,o.Wm)(y)])),_:1}),p])),_:1},8,["onClick","onKeyup"]),(0,o.Wm)(b,{type:"success",style:{float:"right",width:"40%"},onClick:r[4]||(r[4]=r=>e.$router.push("/login"))},{default:(0,o.w5)((()=>[c,(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C)])),_:1})])),_:1})])])),_:1},8,["model","rules"])])],4)}var f=t(4471),g=t(7929),w={name:"Register",components:{ValidCode:g.Z},data(){return{form:{address:"长沙市",nickName:"游客",role:2},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm:[{required:!0,message:"请确认密码",trigger:"blur"}]},background:{backgroundImage:"url("+t(4333)+")",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center top"},validcodes:""}},methods:{createValidCode(e){this.validcodes=e},register(){this.form.password===this.form.confirm?this.$refs["form"].validate((e=>{if(e){if(!this.form.validCode)return this.$message.error("请输入验证码");if(this.form.validCode.toLowerCase()!==this.validcodes.toLowerCase())return this.$message.error("验证码错误");f.Z.post("/user/register",this.form).then((e=>{console.log(e),"0"===e.code?(this.$message.success("注册成功"),this.$router.push("/")):(this.$message.error(e.message),this.$router.replace("/register"))}))}})):this.$message.error("两次密码输入不一致")},keyDown(e){13===e.keyCode&&this.register()}},mounted(){window.addEventListener("keydown",this.keyDown)},destroyed(){window.removeEventListener("keydown",this.keyDown,!1)}},v=t(3744);const y=(0,v.Z)(w,[["render",h],["__scopeId","data-v-735b96ba"]]);var k=y},4333:function(e,r,t){e.exports=t.p+"img/book5.f6e31e45.jpg"}}]);
//# sourceMappingURL=785.f5dbe0f5.js.map